@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    @*<link rel="shortcut icon" type="image/png" href="~/images/logo_icon.png" />*@
    <link rel="shortcut icon" type="image/png" href="~/images/sistema/favicon.ico" />

    <title>Restablecer Contraseña</title>

    <!-- Bootstrap -->
    <link href="~/Content/bootstrap/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/feather/css/feather.css" rel="stylesheet" />
    <!-- Font Awesome -->

    <link href="~/Content/font-awesome/font-awesome.min.css" rel="stylesheet" />
    <!-- NProgress -->
    <!--<link href="../vendors/nprogress/nprogress.css" rel="stylesheet">-->
    <!-- Animate.css -->
    <link href="~/Content/animate/animate.min.css" rel="stylesheet" />

    <!-- Custom Theme Style -->
    <link href="~/Content/site-login.css" rel="stylesheet" />

</head>

<body>

    <div class="container">
        <div class="content">
            <div class="row" style="    padding-top: 10%;">
                <div class="col-md-offset-3 col-md-6 col-sm-offset-3 col-sm-6 col-xs-12">
                    <div class="col-lg-6 hidden-md hidden-sm hidden-xs text-center">
                        <div class="col-md-12 col-sm-12 col-xs-12 text-left">
                            <img src="~/images/logo_restablecer.png" class="logo-login" />
                        </div>
                        <div class="col-md-12 col-sm-12 col-xs-12 text-left">
                            <div style="padding: 2%;margin: 0;font-size: large;color: gray;" id="TextoConfig"></div>
                            <div style="padding: 2%;margin: 0;font-size: small;color: gray;" id="PieConfig"></div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                        <div class="card-rounded" style="background-color: #f7f7f7;border: 1px solid;">
                            <div class="card-body text-center divValidarCorreo">
                                <div class="row" style="border-bottom: gray 2px solid;">
                                    <h4>Restablecer Contraseña</h4>
                                </div>
                                <div class="row" style="padding-top: 5%;">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <div class="form-group text-left">
                                            <label>Usuario</label>
                                            <input type="text" value="" id="txt_numDoc" class="form-control" name="numDoc" onkeypress="return avoidSpaceInput(event)">
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <div class="form-group text-left">
                                            <label>Correo</label>
                                            <input type="text" value="" id="txt_correo" class="form-control" name="correo" onkeypress="return avoidSpaceInput(event)">
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="padding-top: 5%;">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <button class="btn btn-login" id="btnValidaCorreo" type="submit">Validar</button>
                                    </div>
                                </div>
                                <div id="responseError" hidden>
                                    <div class="alert alert-danger alert-dismissible" role="alert">
                                    </div>
                                </div>
                            </div>
                            <div class="card-body text-center divCambiarContra" hidden>
                                <div class="row" style="border-bottom: gray 2px solid;">
                                    <h4>Restablecer Contraseña</h4>
                                </div>
                                <div class="row" style="padding-top: 5%;">
                                    <form action="/LoginSiscop/CambiarClave" class="mt-3 container" method="post" id="claveForm">
                                        @Html.AntiForgeryToken()
                                        <div class="form-group  text-left p-relative">
                                            <label>Nueva Contraseña</label>
                                            <div class="input-group" style="display:flex">
                                                <input type="password" id="ps_edit_dos" validationpass="false" class="form-control" maxlength="50" required autocomplete="current-password" placeholder="Nueva Contraseña" name="nuevacontraseña" onkeypress="return avoidSpaceInput(event)">
                                                <button id="buttomshowpassedit2" onclick="mostrarClaveEdit2(this)" type="button" class="buttom-show"><i class="fa fa-eye"></i></button>
                                            </div>
                                            <div id="contraneValidate" style="display:none;border: thin solid gray;padding: 1%;">
                                                <h5>La contraseña debería cumplir con las siguientes políticas:</h5>
                                                <div>
                                                    <span id="capital">Debe tener al menos <strong>una Mayúscula</strong><br /></span>
                                                    <span id="letter">Debe tener al menos <strong>una Minúscula</strong><br /></span>
                                                    <span id="number">Debe tener al menos <strong>un Número</strong><br /></span>
                                                    <span id="especial">Debe tener al menos <strong>un Caracter Especial (@@ # $ % () * - _ / .)</strong><br /></span>
                                                    <span id="length">Debe ser como mínimo <strong>8 dígitos</strong><br /></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group  text-left p-relativee">
                                            <label>Confirmar Contraseña</label>
                                            <div class="input-group" style="display:flex">
                                                <input type="password" id="ps_edit_tres" validationpass="false" class="form-control" maxlength="50" required autocomplete="current-password" placeholder="Confirmar Contraseña" name="contraseña" onkeypress="return avoidSpaceInput(event)">
                                                <button id="buttomshowpassedit3" onclick="mostrarClaveEdit3(this)" type="button" class="buttom-show"><i class="fa fa-eye"></i></button>
                                            </div>
                                            <div id="contraneValidate2" style="display:none;color: red;;padding: 1%;">
                                                <div>
                                                    <span id="igual">La contraseña no coincide</span>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="row" style="padding-top: 5%;">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <button class="btn btn-login" id="btnActualizarContrasena" type="submit">Actualizar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer">
                <div>
                    <img src="~/images/logo_footer.png" class="logo-login" style="max-width: 250px !important" />
                </div>
                <p>Copyright ©️2021 TECFLEX S.A.C. Todos los derechos reservados.</p>
            </div>
        </div>
    </div>
    @Scripts.Render("~/bundles/jquery")
    <script src="~/Scripts/login.js"></script>
    <script src="~/Scripts/pnotify/pnotify.js"></script>
    <script src="~/Scripts/pnotify/pnotify.buttons.js"></script>
    <script src="~/Scripts/pnotify/pnotify.nonblock.js"></script>
    <script src="~/Scripts/dialog/sweetalert2.min.js"></script>
    <script src="~/Scripts/blockUI/jquery.blockUI.js"></script>
    
    <link href="~/Content/pnotify/pnotify.css" media="all" rel="stylesheet" type="text/css" />
    <link href="~/Content/pnotify/pnotify.buttons.css" media="all" rel="stylesheet" type="text/css" />
    <link href="~/Content/pnotify/pnotify.nonblock.css" media="all" rel="stylesheet" type="text/css" />
    <link href="~/Content/dialog/sweetalert2.min.css" media="all" rel="stylesheet" type="text/css" />
    <style>
        .dark {
            color: #34495E
        }
        .ui-pnotify.dark .ui-pnotify-container {
            color: #E9EDEF;
            background-color: rgba(52, 73, 94, 0.88);
            border-color: rgba(52, 73, 94, 0.88)
        }
    </style>
    <script>
        let intIdPersona_TMP
        $(document).ready(function () {
            $.post(
                '/LoginSiscop/GetTexto',
                {},
                (response) => {
                    if (response == "") {
                        $(".divCambiarContra").hide()
                        $(".divValidarCorreo").show()
                    } else {
                        $(".divValidarCorreo").hide()
                        $(".divCambiarContra").show()
                        intIdPersona_TMP = parseInt(response)
                    }
                });
            $.post(
                '/LoginSiscop/GetConfig',
                {},
                (response) => {
                    
                    $("#TextoConfig").html(response["textoConfig"].replace("|", "<br>"))
                    $("#PieConfig").html(response["pieConfig"].replace("www.tecflex.com", `<a href="https://www.tecflex.com" target="_blank">www.tecflex.com</a>`))
                });
        });
    </script>
</body>
</html>
